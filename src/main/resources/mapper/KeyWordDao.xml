<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.neu.jianshufront.dao.KeyWordDao">
    <select id="getLinkByKeyWord" resultType="com.neu.jianshufront.entity.KeyWord">
        select * from jianshu.article where find_in_set(#{keyWord},key_words);
    </select>

    <select id="getArticleInCollect" resultType="com.neu.jianshufront.entity.KeyWord">
        select * from jianshu.article where
        pid in (select pid from jianshu.user_action where user_action.uid=#{id} and
                                                          user_action.action='collect'
            and user_action.category=#{category})
    </select>

    <insert id="add" parameterType="com.neu.jianshufront.entity.KeyWord" keyProperty="id" keyColumn="id" useGeneratedKeys="true">
        insert into jianshu.article
        (uid, pid, author, last_update_time, font_num, read_num, like_num, comment_num, title,
         url, content, key_words, vector, frequence, other_text)
        values
        (#{uid},#{pid},#{author},#{lastUpdateTime},#{fontNum},#{readNum},#{likeNum},#{commentNum}
        ,#{title},#{url},#{content},#{keyWords},#{vector},#{frequence},#{otherText})
    </insert>
</mapper>